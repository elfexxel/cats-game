<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Chruno33 Journey</title>

<style>
body{
margin:0;
overflow:hidden;
background:#000;
font-family:cursive;
touch-action:none;
}

canvas{
display:block;
}

#counter{
position:absolute;
top:15px;
left:15px;
color:white;
font-size:22px;
}
</style>
</head>

<body>

<div id="counter">ðŸŒ¹ 0 / 33</div>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let worldOffset = 0;
let collected = 0;
let gameEnd = false;

// PLAYER
let cat = {
x:200,
y:canvas.height/2,
size:35,
speed:6
};

// ROSES
let roses = [];
for(let i=0;i<33;i++){
roses.push({
x:500 + i*220,
y:canvas.height/2 + (Math.random()*120-60),
taken:false
});
}

// SNOW
let snow = [];
for(let i=0;i<120;i++){
snow.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
speed:1+Math.random()*2
});
}

// TOUCH CONTROL
canvas.addEventListener("touchmove", e=>{
e.preventDefault();

let touchX = e.touches[0].clientX;

if(touchX > canvas.width/2){
worldOffset += cat.speed;
}else{
worldOffset -= cat.speed;
}

if(worldOffset < 0) worldOffset = 0;

});

// KEYBOARD TEST
window.addEventListener("keydown", e=>{
if(e.key==="ArrowRight") worldOffset += cat.speed;
if(e.key==="ArrowLeft") worldOffset -= cat.speed;
});

// PATH
function drawPath(){
ctx.fillStyle="#222";

let pathY = canvas.height/2-90;

// world ile kaydÄ±r
ctx.fillRect(-worldOffset,pathY,8000,180);
}

// SNOW
function drawSnow(){
ctx.fillStyle="white";

snow.forEach(s=>{
ctx.fillRect(s.x,s.y,2,2);

s.y += s.speed;

if(s.y>canvas.height){
s.y=0;
s.x=Math.random()*canvas.width;
}
});
}

// CAT
function drawCat(){
ctx.fillStyle="orange";
ctx.beginPath();
ctx.arc(cat.x,cat.y,cat.size,0,Math.PI*2);
ctx.fill();

ctx.fillStyle="brown";
ctx.beginPath();
ctx.arc(cat.x-10,cat.y-5,5,0,Math.PI*2);
ctx.arc(cat.x+10,cat.y-5,5,0,Math.PI*2);
ctx.fill();

ctx.fillStyle="white";
ctx.font="20px cursive";
ctx.fillText("chruno33",cat.x-35,cat.y-45);
}

// ROSES
function drawRoses(){

roses.forEach(r=>{

if(!r.taken){

let screenX = r.x - worldOffset;

ctx.fillStyle="purple";
ctx.beginPath();
ctx.arc(screenX,r.y,14,0,Math.PI*2);
ctx.fill();

// collision
let dist = Math.hypot(cat.x-screenX,cat.y-r.y);

if(dist < 40){
r.taken = true;
collected++;

document.getElementById("counter").innerText =
"ðŸŒ¹ "+collected+" / 33";

if(collected===33){
gameEnd = true;
}
}
}
});
}

// SEA SCENE
function drawSeaScene(){

ctx.fillStyle="#001a33";
ctx.fillRect(0,0,canvas.width,canvas.height);

// waves
for(let i=0;i<canvas.width;i+=40){
ctx.fillStyle="blue";
ctx.fillRect(
i,
canvas.height/2 + Math.sin(Date.now()/400 + i)*15,
40,
30
);
}

// cats
ctx.fillStyle="orange";
ctx.beginPath();
ctx.arc(canvas.width/3,canvas.height/2,50,0,Math.PI*2);
ctx.fill();

ctx.fillStyle="white";
ctx.fillText("chruno33",canvas.width/3-40,canvas.height/2-70);

ctx.fillStyle="black";
ctx.beginPath();
ctx.arc(canvas.width/1.7,canvas.height/2,50,0,Math.PI*2);
ctx.fill();

ctx.fillStyle="green";
ctx.beginPath();
ctx.arc(canvas.width/1.7-15,canvas.height/2-5,6,0,Math.PI*2);
ctx.arc(canvas.width/1.7+15,canvas.height/2-5,6,0,Math.PI*2);
ctx.fill();

ctx.fillStyle="purple";
ctx.font="28px cursive";
ctx.fillText(
"elfexxel'den sevgilim chruno33'e",
canvas.width/2-200,
100
);
}

// LOOP
function update(){

ctx.clearRect(0,0,canvas.width,canvas.height);

if(!gameEnd){
drawPath();
drawSnow();
drawRoses();
drawCat();
}else{
drawSeaScene();
}

requestAnimationFrame(update);
}

update();
</script>

</body>
</html>
